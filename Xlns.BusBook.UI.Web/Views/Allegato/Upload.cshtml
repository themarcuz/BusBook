@model Xlns.BusBook.UI.Web.Models.AllegatoViewModel
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <title>Upload file</title>
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" media="screen"/>
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Content/upload.css")" rel="stylesheet" type="text/css" media="screen"/>   
</head>
<body>
    <div>
        @using (Ajax.BeginForm("Save", "Allegato",
                    new AjaxOptions() 
                    {
                        HttpMethod = "POST",
                        LoadingElementId = "loadingDiv",
                        OnSuccess = "onSuccess",
                        OnFailure = "onError"
                    },
                    new { enctype = "multipart/form-data" }))
        {
            <div style="margin-bottom: 5px">
                <input type="file" name="file" id="file" />
            </div>
            <div style="display:inline-block; height: 30px">
            <input type="submit" value="Carica" class="button" />
            <img alt="loading" style="display: none; vertical-align:top; margin-left: 20px" id="loadingDiv" src="@Url.Content("~/Content/img/loading.gif")" width="24px" height="24px"/>
            <span id="errorSpan"></span>
            @*if (!String.IsNullOrEmpty(Model.Errore))
            {
                <text>@Model.Errore</text>
            }*@
            </div>
            @Html.HiddenFor(m => m.Viaggio.Id)
            @Html.HiddenFor(m => m.Tipo)
        }
    </div>
    <script type="text/javascript">
        function onBegin() {
            $('#loadingDiv').show();
        }

        function onError() {
            alert("Errore");
        }

        function onSuccess() {
            alert("Successo");
        }

    </script>
</body>
</html>
